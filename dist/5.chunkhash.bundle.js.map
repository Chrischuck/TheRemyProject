{"version":3,"sources":["webpack:///./src/components/animate.js","webpack:///./src/utils/aws.js","webpack:///./src/utils/lacroixMap.js","webpack:///./src/routes/current/index.js"],"names":["fadeIn","keyframes","_templateObject","FadeIn","styled","div","_templateObject2","fadeInFromLeft","_templateObject3","FadeInFromLeft","_templateObject4","pulse","_templateObject5","fadeInFromTop","_templateObject6","_templateObject7","FadeInFromTop","_templateObject8","aws_sdk__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","aws_sdk__WEBPACK_IMPORTED_MODULE_0___default","n","AWS","config","update","accessKeyId","process","secretAccessKey","region","lacroixMap","pure","id","img","name","description","lime","lemon","orange","berry","cran-raspberry","pamplemousse","peach_pear","coconut","apricot","passionfruit","mango","tangerine","key_lime","Card","_ref","lacroix","updateItem","react_default","a","createElement","className","style","marginBottom","pickup","animate","marginTop","onClick","margin","width","fontWeight","padding","height","src","_default","props","_this","_classCallCheck","this","_getPrototypeOf","call","_defineProperty","_assertThisInitialized","_asyncToGenerator","regeneratorRuntime","mark","_callee","ddb","params","d","wrap","_context","prev","next","DynamoDB","ExpressionAttributeValues",":email","S","email",":pending","FilterExpression","ProjectionExpression","TableName","scan","promise","then","Items","catch","console","log","sent","setState","current","map","c","aws_id","drink","stop","state","length","s","current_Card","_ref3","_callee2","phone","_context2","Key","UpdateExpression",":pickup","ReturnValues","fetchData","window","localStorage","getItem","fetch","concat","method","headers","Content-Type","body","JSON","stringify","number","_x","apply","arguments","React","Component","interval","setInterval","setItem","clearInterval","paddingBottom","renderLacroix"],"mappings":"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","file":"5.chunkhash.bundle.js","sourcesContent":["import styled, { keyframes } from 'styled-components';\n\nconst fadeIn = keyframes`\nfrom {\n  opacity: .0;\n}\nto {\n  opacity 1;\n}\n`;\n\nexport const FadeIn = styled.div`\n  animation: ${fadeIn} 1.3s;\n`;\n\nconst fadeInFromLeft = keyframes`\nfrom {\n  opacity: 0;\n  transform: translate3d(100%, 0, 0);\n}\n\nto {\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n}\n`;\n\nexport const FadeInFromLeft = styled.div`\n  animation: ${fadeInFromLeft} .8s;\n`;\n\nconst pulse = keyframes`\nfrom {\n  transform: scale3d(1, 1, 1);\n}\n\n50% {\n  transform: scale3d(1.05, 1.05, 1.05);\n}\n\nto {\n  transform: scale3d(1, 1, 1);\n}\n`;\n\nexport const Pulse = styled.div`\n  animation: ${pulse} 1s;\n  display: flex;\n`;\n\nconst fadeInFromTop = keyframes`\nfrom {\n  opacity: 0;\n  transform: translate3d(0, -100%, 0);\n}\n\nto {\n  opacity: 1;\n  transform: translate3d(0, 0, 0);\n}\n`;\n\nexport const FadeInFromTop = styled.div`\n  animation: ${fadeInFromTop} .8s;\n`;","import AWS from 'aws-sdk'\n\nAWS.config.update({\n  accessKeyId: process.env.AWS_ACCESS_KEY,\n  secretAccessKey: process.env.AWS_SECRET_KEY,\n  region: \"us-west-2\"\n})\n\nexport default AWS","export default {\"pure\":{\"id\":\"pure\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Pure_Drop_TA-copy.png\",\"name\":\"Pure\",\"description\":\"Pure: crisp, clean, and clear, the blue can is pure, our only unflavored sparkling.\"},\"lime\":{\"id\":\"lime\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Lime_Drop_TA-copy.png\",\"name\":\"Lime\",\"description\":\"Lime: is as good as it looks, always a crowd pleaser.\"},\"lemon\":{\"id\":\"lemon\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Lemon_Drop_TA-copy.png\",\"name\":\"Lemon\",\"description\":\"Lemon: tastes better as a sparkling water, no seeds or soggy fruit floater.\"},\"orange\":{\"id\":\"orange\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Orange_Drop_TA-copy.png\",\"name\":\"Orange\",\"description\":\"Orange: the more things change the more they stay the same as this tangy flavor is a fan favorite!\"},\"berry\":{\"id\":\"berry\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Berry_Drop_TA-copy.png\",\"name\":\"Berry\",\"description\":\"Berry: hopefully you’re switching to sparkling because it’s berry delicious!\"},\"cran-raspberry\":{\"id\":\"cran-raspberry\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/CranRas_Drop_TA-copy.png\",\"name\":\"Cran-Raspberry\",\"description\":\"Cran-Raspberry: a mixture of two great tastes that’s berry delightful with nothing artificial.\"},\"pamplemousse\":{\"id\":\"pamplemousse\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Pamplemousse_Drops_TA-copy.png\",\"name\":\"Pamplemousse\",\"description\":\"Pamplemousse: it’s the French translation for the word grapefruit and show of humor from this all-American brand.\"},\"peach_pear\":{\"id\":\"peach_pear\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/PeachPear_Drop_TA-copy.png\",\"name\":\"Peach Pear\",\"description\":\"Peach Pear: combines the sweet smell of peach with a rounded pear taste.\"},\"coconut\":{\"id\":\"coconut\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Coconut_Drops_TA-copy.png\",\"name\":\"Coconut\",\"description\":\"Coconut: summer in a can, coconut is great as a mixer.\"},\"apricot\":{\"id\":\"apricot\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Apricot_Drops_TA.png\",\"name\":\"Apricot\",\"description\":\"Apricot: is a 2014 new addition to the family which brings a never-been-done-before flavor to the sparkling water aisle!\"},\"passionfruit\":{\"id\":\"passionfruit\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/PassionFruit_Drops_TA-copy.png\",\"name\":\"Passionfruit\",\"description\":\"Passionfruit now available nationwide! Check your local retailers as our newest flavor is added to store shelves throughout early 2015\"},\"mango\":{\"id\":\"mango\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Mango_Drops_TA-copy.png\",\"name\":\"Mango\",\"description\":\"Mango: another new flavor for 2014, mangos are green on the outside with a slightly red hue on top when ripe, thus the can colors.\"},\"tangerine\":{\"id\":\"tangerine\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2014/08/Tangerine_Drops_TA-copy.png\",\"name\":\"Tangerine\",\"description\":\"Tangerine: freshly peeled aroma and Tangerr -EEN effervescence to transport your taste buds! Available now in select markets.\"},\"key_lime\":{\"id\":\"key_lime\",\"img\":\"https://www.lacroixwater.com/wp-content/uploads/2017/11/Lime_Drop_TA.jpg\",\"name\":\"Key Lime\",\"description\":\"Starts with a creamy note of toasted meringue, followed by the tart, crisp KeyLime essence, trailing with a rich, graham cracker finish.\"}}","import React from 'react';\n\nimport AWS from '../../utils/aws'\nimport lacroixMap from '../../utils/lacroixMap'\n\nimport { FadeIn } from '../../components/animate'\n\nconst Card = ({ lacroix, updateItem }) => (\n  <div className='checkout-box' style={{ marginBottom: '10px'}}>\n    <div className='item-words' >\n      <h3 className='item-title'>{lacroix.name}</h3> \n      <p className='item-desc'>{lacroix.description}</p>\n      {\n        !lacroix.pickup ?\n          <a onClick={updateItem} className='round-button' style={{ margin: 0, width: '110px', fontWeight: 'bold', padding: '7px 30px' }}>Pickup</a> :\n          <FadeIn><p style={{marginTop: '20px'}}>Awesome! We're on our way to pick up your LaCroix.</p></FadeIn>\n      }\n\n    </div>\n    <div className='item-image-container'>\n      <img style={{height: '110px', width: '110px' }} src={lacroix.img} />\n    </div>\n  </div>\n)\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      current: []\n    }\n  }\n\n  componentDidMount() {\n    this.fetchData()\n\n    const interval = setInterval(this.fetchData, 2000);\n    window.localStorage.setItem('current_drink_poll', interval)\n  }\n\n  componentDidCatch() {\n    const interval = window.localStorage.getItem('current_drink_poll')\n    clearInterval(interval)\n  }\n  componentWillUnmount() {\n    const interval = window.localStorage.getItem('current_drink_pollsssss')\n    clearInterval(interval)\n  }\n\n\n  fetchData = async () => {\n    const ddb = new AWS.DynamoDB({});\n    const params = {\n      ExpressionAttributeValues: {\n       \":email\": {\n         S: this.props.email \n        },\n        \":pending\": {\n          S: 'pending'\n        }\n      },\n      FilterExpression: \"pending <> :pending AND email = :email\",\n      ProjectionExpression: \"drink, pickup, id\", \n      TableName: \"remy_orders\"\n     };\n\n    const d = await ddb.scan(params).promise()\n    .then((d) => d.Items)\n    .catch(console.log)\n\n    if (d) {\n      this.setState({ current: d.map(c => ({ aws_id: c.id.S, drink: c.drink.S, pickup: c.pickup ? c.pickup.S : null }) ) })\n    }\n  }\n\n  renderLacroix = () => {\n    const { current } = this.state\n\n    if (current.length < 1) {\n      return (\n        <div className='checkout-box'>\n          <div className='item-words'>\n            <h3 className='item-title'>Uh Oh.</h3> \n            <p className='item-desc'>You don't have any LaCroix! Let's change that.</p>\n          </div>\n        </div>\n      )\n    }\n\n    return current.map(c => {\n      const s = lacroixMap[c.drink]\n      s.pickup = c.pickup\n      s.aws_id = c.aws_id\n      return s\n    }).map(c => <Card lacroix={c} updateItem={() => this.updateItem(c.aws_id)} />)\n  }\n\n  updateItem = async (id) => {\n    const ddb = new AWS.DynamoDB({});\n\n    const params = {\n      TableName:\"remy_orders\",\n      Key: {\n        id: {\n          S: id\n        }\n      },\n      UpdateExpression: \"set pickup = :pickup\",\n      ExpressionAttributeValues:{\n          \":pickup\": {\n            S: 'true'\n          },\n      },\n      ReturnValues:\"UPDATED_NEW\"\n    };\n\n    await ddb.updateItem(params).promise()\n    .then(() => this.fetchData())\n    .catch(console.log)\n\n    const phone = window.localStorage.getItem('phone')\n    if (phone) {\n      await fetch(`${process.env.TWILLIO_SERVER}/pickup-pending`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          number: phone\n        })\n      })\n      .catch(console.log)\n    }\n  }\n   \n  render() {\n    return (\n      <div className='order-parent'>\n        <div className='order-header' style={{paddingBottom: '12px'}}>\n          <div style={{ width: '70%', margin: 'auto'}}>\n            <h1>Current LaCroix</h1>\n            <p></p>\n          </div>\n        </div>\n\n      <div className='checkout-section-parent'>\n        <h4>Drink List</h4>\n        { this.renderLacroix() }\n      </div>\n\n      </div>\n    )\n  }\n}"],"sourceRoot":""}